/**
 * Dengue Fever Disease Module
 * 
 * Based on WHO Dengue Guidelines (FREE, Public Domain)
 * Source: https://www.who.int/publications/i/item/9789241547871
 * 
 * Downloadable: 10KB
 * Offline-ready: 100% functional offline
 */

import { DiseaseModule } from './malaria';

export const dengueModule: DiseaseModule = {
  id: 'dengue',
  name: 'Dengue Fever Management',
  version: '1.0.0',
  size: '10KB',
  lastUpdated: '2025-11-27',
  
  icd10Codes: [
    {
      code: 'A90',
      title: 'Dengue fever [classical dengue]',
      description: 'Uncomplicated dengue without warning signs (Group A)',
    },
    {
      code: 'A91',
      title: 'Dengue hemorrhagic fever',
      description: 'Severe dengue with plasma leakage and bleeding manifestations (Group B/C)',
    },
    {
      code: 'R57.1',
      title: 'Hypovolemic shock',
      description: 'Used for dengue shock syndrome - severe dengue with circulatory failure',
    },
    {
      code: 'A97.9',
      title: 'Unspecified mosquito-borne viral fever',
      description: 'For suspected dengue pending laboratory confirmation',
    },
  ],

  diagnosticCriteria: [
    { symptom: 'Fever 2-7 days (acute onset)', severity: 'moderate', diagnostic: true },
    { symptom: 'Severe headache', severity: 'moderate', diagnostic: true },
    { symptom: 'Retro-orbital pain (behind eyes)', severity: 'moderate', diagnostic: true },
    { symptom: 'Muscle pain (myalgia)', severity: 'moderate', diagnostic: true },
    { symptom: 'Joint pain (arthralgia)', severity: 'moderate', diagnostic: true },
    { symptom: 'Skin rash (maculopapular)', severity: 'mild', diagnostic: false },
    { symptom: 'Nausea/vomiting', severity: 'mild', diagnostic: false },
    { symptom: 'Mild bleeding (nose, gums)', severity: 'moderate', diagnostic: false },
    { symptom: 'Positive NS1 antigen test', severity: 'severe', diagnostic: true },
    { symptom: 'Positive IgM/IgG serology', severity: 'severe', diagnostic: true },
    { symptom: 'Low platelet count (<100,000)', severity: 'moderate', diagnostic: true },
    { symptom: 'Rising hematocrit (>20%)', severity: 'severe', diagnostic: true },
  ],

  differentialDiagnosis: [
    'Malaria (B50-B54)',
    'Chikungunya (A92.0)',
    'Zika virus (A92.5)',
    'Influenza (J10-J11)',
    'Leptospirosis (A27)',
    'Typhoid fever (A01.0)',
    'Measles (B05)',
    'Sepsis (A41)',
  ],

  treatmentGuidelines: {
    mild: [
      'ðŸ“‹ DENGUE WITHOUT WARNING SIGNS (Group A):',
      '',
      'Criteria:',
      '- Fever + 2 symptoms (headache, retro-orbital pain, myalgia, rash)',
      '- NO warning signs',
      '- Platelet >50,000',
      '- Stable vitals',
      '',
      'Management (OUTPATIENT):',
      '1. Oral hydration:',
      '   - Encourage fluids 2-3 L/day',
      '   - ORS, fruit juice, coconut water, soup',
      '   - Avoid plain water only',
      '',
      '2. Fever control:',
      '   - Paracetamol 15mg/kg every 6 hours',
      '   - âš ï¸ AVOID aspirin and NSAIDs (bleeding risk)',
      '   - Tepid sponging if high fever',
      '',
      '3. Monitor at home:',
      '   - Daily clinic review during critical phase (days 4-7)',
      '   - Watch for warning signs',
      '   - Check urine output (adequate hydration)',
      '',
      '4. Education on warning signs:',
      '   - Severe abdominal pain',
      '   - Persistent vomiting',
      '   - Bleeding (any)',
      '   - Lethargy/restlessness',
      '   - Liver enlargement',
      '',
      '5. Laboratory:',
      '   - Full blood count daily (days 3-7)',
      '   - Hematocrit and platelet trend',
    ],
    moderate: [
      'âš ï¸ DENGUE WITH WARNING SIGNS (Group B):',
      '',
      'Warning signs:',
      '- Abdominal pain or tenderness',
      '- Persistent vomiting (>3 episodes in 24h)',
      '- Clinical fluid accumulation (ascites, pleural effusion)',
      '- Mucosal bleeding (nose, gums, menorrhagia)',
      '- Lethargy or restlessness',
      '- Liver enlargement >2cm',
      '- Rising hematocrit with dropping platelets',
      '',
      'Management (HOSPITAL ADMISSION):',
      '1. IV fluid resuscitation:',
      '   - Start IV crystalloid (0.9% saline or Ringer lactate)',
      '   - 5-7 mL/kg/hour for 1-2 hours',
      '   - Then reduce to 3-5 mL/kg/hour x 2-4 hours',
      '   - Then 2-3 mL/kg/hour as maintenance',
      '',
      '2. Close monitoring:',
      '   - Vital signs hourly',
      '   - Hematocrit every 4-6 hours',
      '   - Urine output hourly (goal >0.5 mL/kg/hour)',
      '   - Platelet count 12-24 hourly',
      '   - Watch for shock or bleeding',
      '',
      '3. Adjust fluids based on response:',
      '   - If improving: Taper IV fluids over 24-48h',
      '   - If stable Hct but poor perfusion: Increase to 5-10 mL/kg/hour',
      '   - If rising Hct: Bolus 10-20 mL/kg over 1h',
      '',
      '4. NO routine platelet transfusion:',
      '   - Only if severe bleeding + low platelets',
      '',
      '5. Discharge criteria:',
      '   - Afebrile for 24h without antipyretics',
      '   - Improving clinical state',
      '   - Rising platelet count',
      '   - Stable hematocrit',
    ],
    severe: [
      'ðŸš¨ SEVERE DENGUE (Group C) - ICU ADMISSION:',
      '',
      'Criteria (ANY of):',
      '1. Severe plasma leakage â†’ Shock or respiratory distress',
      '2. Severe bleeding (GI, intracranial)',
      '3. Severe organ impairment (liver, CNS, heart)',
      '',
      'IMMEDIATE MANAGEMENT:',
      '',
      'ðŸ”´ If SHOCK (DSS - Dengue Shock Syndrome):',
      '- Compensated shock: Narrow pulse pressure <20mmHg',
      '- Hypotensive shock: SBP <90mmHg',
      '',
      'Treatment:',
      '1. IV crystalloid bolus 10-20 mL/kg over 15-30 min',
      '2. Reassess: If improving, reduce to 5-7 mL/kg/hour',
      '3. If no improvement: Repeat bolus, consider colloid',
      '4. If still unstable: Colloid bolus (Dextran, Gelatin)',
      '   - 10-15 mL/kg over 1 hour',
      '5. If persistent shock:',
      '   - Inotropes (dopamine, dobutamine)',
      '   - Check Hct: If very high (>50%), give colloid',
      '   - If bleeding + low Hct: Transfuse packed RBCs',
      '',
      'ðŸ”´ If SEVERE BLEEDING:',
      '1. Transfuse packed red cells (target Hct 30%)',
      '2. Fresh frozen plasma if coagulopathy',
      '3. Platelet transfusion if <20,000 + active bleeding',
      '4. Monitor Hct frequently',
      '',
      'ðŸ”´ If ORGAN IMPAIRMENT:',
      '- Liver: ALT/AST >1000, coagulopathy',
      '  * Supportive care, correct coagulopathy',
      '- CNS: Encephalopathy, seizures',
      '  * Rule out intracranial bleed (CT)',
      '  * Supportive, anticonvulsants if needed',
      '- Cardiac: Myocarditis, heart failure',
      '  * Echo, supportive care, careful fluids',
      '- Renal: Acute kidney injury',
      '  * Fluid balance, consider dialysis',
      '',
      'ðŸ”´ MONITORING (ICU):',
      '- Vital signs every 15-30 min until stable',
      '- Hematocrit every 2-4 hours',
      '- Urine output hourly',
      '- Blood glucose 4-6 hourly',
      '- Arterial blood gas if severe',
      '- Liver/renal function daily',
    ],
  },

  redFlags: [
    'ðŸš¨ Hypotension (shock) - requires immediate resuscitation',
    'ðŸš¨ Narrow pulse pressure <20mmHg - early shock',
    'ðŸš¨ Severe bleeding (hematemesis, melena, intracranial)',
    'ðŸš¨ Altered consciousness - encephalopathy or bleeding',
    'ðŸš¨ Severe abdominal pain - plasma leakage, organomegaly',
    'ðŸš¨ Persistent vomiting - unable to maintain hydration',
    'ðŸš¨ Cold clammy extremities - poor perfusion',
    'ðŸš¨ Rising hematocrit (>20% increase) - plasma leakage',
    'ðŸš¨ Platelet <20,000 - high bleeding risk',
    'ðŸš¨ Liver enlargement + tenderness - hepatic involvement',
    'ðŸš¨ Ascites or pleural effusion - severe plasma leakage',
    'ðŸš¨ Respiratory distress - pleural effusion or shock',
    'ðŸš¨ Pregnant women - higher risk complications',
    'ðŸš¨ Infants - atypical presentation, higher mortality',
    'ðŸš¨ Elderly or comorbidities - increased risk',
  ],

  followUp: [
    'Critical phase: Days 4-7 after fever onset',
    '- Most complications occur during defervescence',
    '- Daily monitoring essential',
    '',
    'Day 1-3 (Febrile phase):',
    '- Outpatient if no warning signs',
    '- Daily clinic visit or phone check',
    '- Monitor for warning signs',
    '',
    'Day 4-7 (Critical phase):',
    '- Close monitoring (admit if warning signs)',
    '- Daily FBC (Hct, platelets)',
    '- Watch for plasma leakage, shock',
    '',
    'Day 8+ (Recovery phase):',
    '- Fluid reabsorption occurs',
    '- Reduce IV fluids to avoid overload',
    '- Platelet count rises',
    '- Appetite returns',
    '',
    'Discharge criteria:',
    'âœ“ Afebrile >24h without antipyretics',
    'âœ“ Improving clinical state, good appetite',
    'âœ“ Adequate urine output',
    'âœ“ No respiratory distress',
    'âœ“ Stable hematocrit',
    'âœ“ Platelets >50,000 and rising',
    'âœ“ At least 48h after recovery from shock',
    '',
    'Post-discharge:',
    '- Advise rest for 1-2 weeks',
    '- Gradual return to activity',
    '- Repeat FBC in 1 week if platelets still low',
  ],

  prevention: [
    'âœ“ Vector control (mosquito elimination):',
    '  - Eliminate standing water (breeding sites)',
    '  - Change water in vases, coolers weekly',
    '  - Cover water storage containers',
    '  - Use larvicides in water that cannot be emptied',
    '',
    'âœ“ Personal protection:',
    '  - Insect repellent (DEET, picaridin)',
    '  - Long sleeves and pants (peak biting: morning, evening)',
    '  - Mosquito nets (especially for patients with dengue)',
    '  - Screens on windows and doors',
    '',
    'âœ“ Community measures:',
    '  - Clean-up campaigns (remove containers)',
    '  - Public education on dengue prevention',
    '  - Report cases to health authorities',
    '',
    'âœ“ Dengue vaccine (where available):',
    '  - For individuals with prior dengue infection',
    '  - Ages 9-45 in endemic areas',
    '  - NOT for dengue-naÃ¯ve persons',
    '',
    'âœ“ Early detection:',
    '  - Seek care early if fever in endemic area',
    '  - Know warning signs',
    '  - Do not self-medicate with NSAIDs/aspirin',
  ],
};

export default dengueModule;
